import{r as g,j as m}from"./index-CNygDEi8.js";import{w as G,A as P,D as C,B as R,j as W,b as L,M as p,P as k,y as B,u as F,b3 as O,b4 as X}from"./OrbitControls-T7DR67G2.js";import{W as z}from"./three.utils-DT_mVYKh.js";function q(){const w=g.useRef(null);return g.useEffect(()=>{const h=w.current;if(!h)return;const r=[],n=new z(h);n.init(),n.update(),n.updateSize(),n.addOrbitControls();const{scene:o,camera:a,renderer:D}=n;o.background=new G(15790320),a.position.set(600,600,600);const E=new P(4210752,10);n.createModel(E);const f=new C(16777215,3);f.position.set(1,.75,.5).normalize(),o.add(f),a.lookAt(0,0,0);function j(){const e=new O(1e3,20);o.add(e);const t=new X(1e3);return o.add(t),{axesHelper:t,helpGrid:e}}j();const x=new R(50,50,50),S=new W({color:16711680}),H=new L({color:0,transparent:!0,opacity:.5}),u=new p(x,H);o.add(u);const y=new k(1e4,1e4);y.rotateX(-Math.PI/2);const A=new p(y,new L({visible:!1}));r.push(A);const i=new B,c=new F;n.addAction(()=>{});const d={x:0,y:0};function b(e){c.set(e.clientX/window.innerWidth*2-1,-(e.clientY/window.innerHeight)*2+1),i.setFromCamera(c,a);const t=i.intersectObjects(r,!1);if(t.length>0){const s=t[0];u.position.copy(s.point).add(s.face.normal),u.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25)}}function v(e){d.x=e.x,d.y=e.y}function M(e){if(e.button!=0||Math.abs(d.x-e.x)>5||Math.abs(d.y-e.y)>5)return;c.set(e.clientX/window.innerWidth*2-1,-(e.clientY/window.innerHeight)*2+1),i.setFromCamera(c,a);const t=i.intersectObjects(r,!1);if(t.length>0){const s=t[0];{const l=new p(x,S);l.position.copy(s.point).add(s.face.normal),l.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),o.add(l),r.push(l)}}}return document.addEventListener("mousedown",v),document.addEventListener("mouseup",M),document.addEventListener("pointermove",b),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("mouseup",M),document.removeEventListener("pointermove",b)}},[]),m.jsx(m.Fragment,{children:m.jsx("canvas",{style:{display:"block",width:"100vw",height:"100vh"},ref:w})})}export{q as default};
