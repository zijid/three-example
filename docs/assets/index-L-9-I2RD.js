import{r as x,j as l}from"./index-Buk_76b2.js";import{A as B,B as V,j as W,I as k,O as f,w as z,y as F,u as G,V as L}from"./OrbitControls-T7DR67G2.js";import{W as q}from"./three.utils-CYtmvWls.js";function X(){const m=x.useRef(null);return x.useEffect(()=>{const M=m.current;if(M){let v=function(t){var s=Math.random(),E=Math.random(),p=2*Math.PI*s,d=Math.acos(2*E-1),h=t*Math.sqrt(Math.random()),O=h*Math.sin(d)*Math.cos(p),P=h*Math.sin(d)*Math.sin(p),S=h*Math.cos(d);return new L(O,P,S)},y=function(t){c.x=t.clientX/window.innerWidth*2-1,c.y=-(t.clientY/window.innerHeight)*2+1},g=function(t){C.add(t),r.position.set(9999,9999,9999),r.scale.set(0,0,0),r.updateMatrix(),n.setMatrixAt(t,r.matrix),n.instanceMatrix.needsUpdate=!0},j=function(){w.setFromCamera(c,a);const t=w.intersectObjects(u.children,!0);if(t.length>0){const s=t[0].instanceId;s!==void 0&&g(s)}A.render(u,a)};const e=new q(M);e.init(),e.update(),e.updateSize(),e.addOrbitControls();const{scene:u,camera:a,renderer:A}=e;a.position.set(5,5,1);const b=new B(4210752,10);e.createModel(b),a.lookAt(0,0,0);const I=new V(1,1,1),R=new W({color:268435455}),n=new k(I,R,10);console.log("instanced:",n);const o=new f,i=new z;for(let t=0;t<n.count;t++)o.position.copy(v(10)),o.scale.set(Math.random(),Math.random(),Math.random()),o.updateMatrix(),n.setMatrixAt(t,o.matrix),n.setColorAt(t,i.setScalar(.1+.9*Math.random())),i.setRGB(Math.random(),Math.random(),Math.random()),n.setColorAt(t,i);e.createModel(n);const w=new F,c=new G(99999,99999),C=new Set,r=new f;window.addEventListener("pointermove",y),e.addAction(j)}},[]),l.jsx(l.Fragment,{children:l.jsx("canvas",{style:{display:"block",width:"100vw",height:"100vh"},ref:m})})}export{X as default};
