import{r as In,j as gn}from"./index-LRGvuY1f.js";import{V as Dn,A as it,y as ot,u as Tn,O as En,e as lt,b as zn,E as dn,n as ut,J as at,K as ft,Q as ct,M as st,w as pt,c as ht,L as vt,X as gt}from"./OrbitControls-BG2Z3rzr.js";import{W as dt}from"./three.utils-fYnaogqi.js";import{R as On,U as wt,t as yt}from"./RenderPass-CjWJCVJu.js";import{C as Et,a as St}from"./CSS2DRenderer-BJ6-CQE6.js";import{E as Bn,O as mt,S as Mt}from"./OutputPass-jMxpaAbg.js";class Pt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const a=r[i],f=t+a,s=Math.abs(t)<Math.abs(a)?t-(f-a):a-(f-t);s&&(r[e++]=s),t=f}return r[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let r=this._n,e,i,a,f=0;if(r>0){for(f=t[--r];r>0&&(e=f,i=t[--r],f=e+i,a=i-(f-e),!a););r>0&&(a<0&&t[r-1]<0||a>0&&t[r-1]>0)&&(i=a*2,e=f+i,i==e-f&&(f=e))}return f}}function*Rt(n){for(const t of n)yield*t}function $n(n){return Array.from(Rt(n))}var O=1e-6,Ct=1e-12,D=Math.PI,q=D/2,xn=D/4,X=D*2,J=180/D,G=D/180,x=Math.abs,Zn=Math.atan,nn=Math.atan2,U=Math.cos,At=Math.exp,Nt=Math.log,W=Math.sin,Lt=Math.sign||function(n){return n>0?1:n<0?-1:0},vn=Math.sqrt,It=Math.tan;function Dt(n){return n>1?0:n<-1?D:Math.acos(n)}function tn(n){return n>1?q:n<-1?-q:Math.asin(n)}function k(){}function cn(n,t){n&&Wn.hasOwnProperty(n.type)&&Wn[n.type](n,t)}var Un={Feature:function(n,t){cn(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)cn(r[e].geometry,t)}},Wn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)n=r[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){Sn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)Sn(r[e],t,0)},Polygon:function(n,t){Fn(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)Fn(r[e],t)},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)cn(r[e],t)}};function Sn(n,t,r){var e=-1,i=n.length-r,a;for(t.lineStart();++e<i;)a=n[e],t.point(a[0],a[1],a[2]);t.lineEnd()}function Fn(n,t){var r=-1,e=n.length;for(t.polygonStart();++r<e;)Sn(n[r],t,1);t.polygonEnd()}function Tt(n,t){n&&Un.hasOwnProperty(n.type)?Un[n.type](n,t):cn(n,t)}function mn(n){return[nn(n[1],n[0]),tn(n[2])]}function $(n){var t=n[0],r=n[1],e=U(r);return[e*U(t),e*W(t),W(r)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function sn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function wn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ln(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Mn(n){var t=vn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Pn(n,t){function r(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(r.invert=function(e,i){return e=t.invert(e,i),e&&n.invert(e[0],e[1])}),r}function Rn(n,t){return x(n)>D&&(n-=Math.round(n/X)*X),[n,t]}Rn.invert=Rn;function kn(n,t,r){return(n%=X)?t||r?Pn(Hn(n),jn(t,r)):Hn(n):t||r?jn(t,r):Rn}function Gn(n){return function(t,r){return t+=n,x(t)>D&&(t-=Math.round(t/X)*X),[t,r]}}function Hn(n){var t=Gn(n);return t.invert=Gn(-n),t}function jn(n,t){var r=U(n),e=W(n),i=U(t),a=W(t);function f(s,g){var v=U(g),o=U(s)*v,l=W(s)*v,u=W(g),p=u*r+o*e;return[nn(l*i-p*a,o*r-u*e),tn(p*i+l*a)]}return f.invert=function(s,g){var v=U(g),o=U(s)*v,l=W(s)*v,u=W(g),p=u*i-l*a;return[nn(l*i+u*a,o*r+p*e),tn(p*r-o*e)]},f}function zt(n){n=kn(n[0]*G,n[1]*G,n.length>2?n[2]*G:0);function t(r){return r=n(r[0]*G,r[1]*G),r[0]*=J,r[1]*=J,r}return t.invert=function(r){return r=n.invert(r[0]*G,r[1]*G),r[0]*=J,r[1]*=J,r},t}function Ot(n,t,r,e,i,a){if(r){var f=U(t),s=W(t),g=e*r;i==null?(i=t+e*X,a=t-g/2):(i=qn(f,i),a=qn(f,a),(e>0?i<a:i>a)&&(i+=e*X));for(var v,o=i;e>0?o>a:o<a;o-=g)v=mn([f,-s*U(o),-s*W(o)]),n.point(v[0],v[1])}}function qn(n,t){t=$(t),t[0]-=n,Mn(t);var r=Dt(-t[1]);return((-t[2]<0?-r:r)+X-O)%X}function bn(){var n=[],t;return{point:function(r,e,i){t.push([r,e,i])},lineStart:function(){n.push(t=[])},lineEnd:k,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function fn(n,t){return x(n[0]-t[0])<O&&x(n[1]-t[1])<O}function un(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function nt(n,t,r,e,i){var a=[],f=[],s,g;if(n.forEach(function(h){if(!((M=h.length-1)<=0)){var M,w=h[0],C=h[M],E;if(fn(w,C)){if(!w[2]&&!C[2]){for(i.lineStart(),s=0;s<M;++s)i.point((w=h[s])[0],w[1]);i.lineEnd();return}C[0]+=2*O}a.push(E=new un(w,h,null,!0)),f.push(E.o=new un(w,null,E,!1)),a.push(E=new un(C,h,null,!1)),f.push(E.o=new un(C,null,E,!0))}}),!!a.length){for(f.sort(t),Vn(a),Vn(f),s=0,g=f.length;s<g;++s)f[s].e=r=!r;for(var v=a[0],o,l;;){for(var u=v,p=!0;u.v;)if((u=u.n)===v)return;o=u.z,i.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(s=0,g=o.length;s<g;++s)i.point((l=o[s])[0],l[1]);else e(u.x,u.n.x,1,i);u=u.n}else{if(p)for(o=u.p.z,s=o.length-1;s>=0;--s)i.point((l=o[s])[0],l[1]);else e(u.x,u.p.x,-1,i);u=u.p}u=u.o,o=u.z,p=!p}while(!u.v);i.lineEnd()}}}function Vn(n){if(t=n.length){for(var t,r=0,e=n[0],i;++r<t;)e.n=i=n[r],i.p=e,e=i;e.n=i=n[0],i.p=e}}function yn(n){return x(n[0])<=D?n[0]:Lt(n[0])*((x(n[0])+D)%X-D)}function Bt(n,t){var r=yn(t),e=t[1],i=W(e),a=[W(r),-U(r),0],f=0,s=0,g=new Pt;i===1?e=q+O:i===-1&&(e=-q-O);for(var v=0,o=n.length;v<o;++v)if(u=(l=n[v]).length)for(var l,u,p=l[u-1],h=yn(p),M=p[1]/2+xn,w=W(M),C=U(M),E=0;E<u;++E,h=y,w=A,C=L,p=R){var R=l[E],y=yn(R),P=R[1]/2+xn,A=W(P),L=U(P),N=y-h,I=N>=0?1:-1,T=I*N,S=T>D,j=w*A;if(g.add(nn(j*I*W(T),C*L+j*U(T))),f+=S?N+I*X:N,S^h>=r^y>=r){var B=sn($(p),$(R));Mn(B);var m=sn(a,B);Mn(m);var c=(S^N>=0?-1:1)*tn(m[2]);(e>c||e===c&&(B[0]||B[1]))&&(s+=S^N>=0?1:-1)}}return(f<-O||f<O&&g<-Ct)^s&1}function tt(n,t,r,e){return function(i){var a=t(i),f=bn(),s=t(f),g=!1,v,o,l,u={point:p,lineStart:M,lineEnd:w,polygonStart:function(){u.point=C,u.lineStart=E,u.lineEnd=R,o=[],v=[]},polygonEnd:function(){u.point=p,u.lineStart=M,u.lineEnd=w,o=$n(o);var y=Bt(v,e);o.length?(g||(i.polygonStart(),g=!0),nt(o,Ut,y,r,i)):y&&(g||(i.polygonStart(),g=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),g&&(i.polygonEnd(),g=!1),o=v=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(y,P){n(y,P)&&i.point(y,P)}function h(y,P){a.point(y,P)}function M(){u.point=h,a.lineStart()}function w(){u.point=p,a.lineEnd()}function C(y,P){l.push([y,P]),s.point(y,P)}function E(){s.lineStart(),l=[]}function R(){C(l[0][0],l[0][1]),s.lineEnd();var y=s.clean(),P=f.result(),A,L=P.length,N,I,T;if(l.pop(),v.push(l),l=null,!!L){if(y&1){if(I=P[0],(N=I.length-1)>0){for(g||(i.polygonStart(),g=!0),i.lineStart(),A=0;A<N;++A)i.point((T=I[A])[0],T[1]);i.lineEnd()}return}L>1&&y&2&&P.push(P.pop().concat(P.shift())),o.push(P.filter(xt))}}return u}}function xt(n){return n.length>1}function Ut(n,t){return((n=n.x)[0]<0?n[1]-q-O:q-n[1])-((t=t.x)[0]<0?t[1]-q-O:q-t[1])}const Jn=tt(function(){return!0},Wt,Gt,[-D,-q]);function Wt(n){var t=NaN,r=NaN,e=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(a,f){var s=a>0?D:-D,g=x(a-t);x(g-D)<O?(n.point(t,r=(r+f)/2>0?q:-q),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(s,r),n.point(a,r),i=0):e!==s&&g>=D&&(x(t-e)<O&&(t-=e*O),x(a-s)<O&&(a-=s*O),r=Ft(t,r,a,f),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(s,r),i=0),n.point(t=a,r=f),e=s},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Ft(n,t,r,e){var i,a,f=W(n-r);return x(f)>O?Zn((W(t)*(a=U(e))*W(r)-W(e)*(i=U(t))*W(n))/(i*a*f)):(t+e)/2}function Gt(n,t,r,e){var i;if(n==null)i=r*q,e.point(-D,i),e.point(0,i),e.point(D,i),e.point(D,0),e.point(D,-i),e.point(0,-i),e.point(-D,-i),e.point(-D,0),e.point(-D,i);else if(x(n[0]-t[0])>O){var a=n[0]<t[0]?D:-D;i=r*a/2,e.point(-a,i),e.point(0,i),e.point(a,i)}else e.point(t[0],t[1])}function Ht(n){var t=U(n),r=2*G,e=t>0,i=x(t)>O;function a(o,l,u,p){Ot(p,n,r,u,o,l)}function f(o,l){return U(o)*U(l)>t}function s(o){var l,u,p,h,M;return{lineStart:function(){h=p=!1,M=1},point:function(w,C){var E=[w,C],R,y=f(w,C),P=e?y?0:v(w,C):y?v(w+(w<0?D:-D),C):0;if(!l&&(h=p=y)&&o.lineStart(),y!==p&&(R=g(l,E),(!R||fn(l,R)||fn(E,R))&&(E[2]=1)),y!==p)M=0,y?(o.lineStart(),R=g(E,l),o.point(R[0],R[1])):(R=g(l,E),o.point(R[0],R[1],2),o.lineEnd()),l=R;else if(i&&l&&e^y){var A;!(P&u)&&(A=g(E,l,!0))&&(M=0,e?(o.lineStart(),o.point(A[0][0],A[0][1]),o.point(A[1][0],A[1][1]),o.lineEnd()):(o.point(A[1][0],A[1][1]),o.lineEnd(),o.lineStart(),o.point(A[0][0],A[0][1],3)))}y&&(!l||!fn(l,E))&&o.point(E[0],E[1]),l=E,p=y,u=P},lineEnd:function(){p&&o.lineEnd(),l=null},clean:function(){return M|(h&&p)<<1}}}function g(o,l,u){var p=$(o),h=$(l),M=[1,0,0],w=sn(p,h),C=on(w,w),E=w[0],R=C-E*E;if(!R)return!u&&o;var y=t*C/R,P=-t*E/R,A=sn(M,w),L=ln(M,y),N=ln(w,P);wn(L,N);var I=A,T=on(L,I),S=on(I,I),j=T*T-S*(on(L,L)-1);if(!(j<0)){var B=vn(j),m=ln(I,(-T-B)/S);if(wn(m,L),m=mn(m),!u)return m;var c=o[0],d=l[0],z=o[1],F=l[1],H;d<c&&(H=c,c=d,d=H);var Y=d-c,V=x(Y-D)<O,K=V||Y<O;if(!V&&F<z&&(H=z,z=F,F=H),K?V?z+F>0^m[1]<(x(m[0]-c)<O?z:F):z<=m[1]&&m[1]<=F:Y>D^(c<=m[0]&&m[0]<=d)){var _=ln(I,(-T+B)/S);return wn(_,L),[m,mn(_)]}}}function v(o,l){var u=e?n:D-n,p=0;return o<-u?p|=1:o>u&&(p|=2),l<-u?p|=4:l>u&&(p|=8),p}return tt(f,s,a,e?[0,-n]:[-D,n-D])}function jt(n,t,r,e,i,a){var f=n[0],s=n[1],g=t[0],v=t[1],o=0,l=1,u=g-f,p=v-s,h;if(h=r-f,!(!u&&h>0)){if(h/=u,u<0){if(h<o)return;h<l&&(l=h)}else if(u>0){if(h>l)return;h>o&&(o=h)}if(h=i-f,!(!u&&h<0)){if(h/=u,u<0){if(h>l)return;h>o&&(o=h)}else if(u>0){if(h<o)return;h<l&&(l=h)}if(h=e-s,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<l&&(l=h)}else if(p>0){if(h>l)return;h>o&&(o=h)}if(h=a-s,!(!p&&h<0)){if(h/=p,p<0){if(h>l)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<l&&(l=h)}return o>0&&(n[0]=f+o*u,n[1]=s+o*p),l<1&&(t[0]=f+l*u,t[1]=s+l*p),!0}}}}}var b=1e9,an=-b;function qt(n,t,r,e){function i(v,o){return n<=v&&v<=r&&t<=o&&o<=e}function a(v,o,l,u){var p=0,h=0;if(v==null||(p=f(v,l))!==(h=f(o,l))||g(v,o)<0^l>0)do u.point(p===0||p===3?n:r,p>1?e:t);while((p=(p+l+4)%4)!==h);else u.point(o[0],o[1])}function f(v,o){return x(v[0]-n)<O?o>0?0:3:x(v[0]-r)<O?o>0?2:1:x(v[1]-t)<O?o>0?1:0:o>0?3:2}function s(v,o){return g(v.x,o.x)}function g(v,o){var l=f(v,1),u=f(o,1);return l!==u?l-u:l===0?o[1]-v[1]:l===1?v[0]-o[0]:l===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,l=bn(),u,p,h,M,w,C,E,R,y,P,A,L={point:N,lineStart:j,lineEnd:B,polygonStart:T,polygonEnd:S};function N(c,d){i(c,d)&&o.point(c,d)}function I(){for(var c=0,d=0,z=p.length;d<z;++d)for(var F=p[d],H=1,Y=F.length,V=F[0],K,_,rn=V[0],Q=V[1];H<Y;++H)K=rn,_=Q,V=F[H],rn=V[0],Q=V[1],_<=e?Q>e&&(rn-K)*(e-_)>(Q-_)*(n-K)&&++c:Q<=e&&(rn-K)*(e-_)<(Q-_)*(n-K)&&--c;return c}function T(){o=l,u=[],p=[],A=!0}function S(){var c=I(),d=A&&c,z=(u=$n(u)).length;(d||z)&&(v.polygonStart(),d&&(v.lineStart(),a(null,null,1,v),v.lineEnd()),z&&nt(u,s,c,a,v),v.polygonEnd()),o=v,u=p=h=null}function j(){L.point=m,p&&p.push(h=[]),P=!0,y=!1,E=R=NaN}function B(){u&&(m(M,w),C&&y&&l.rejoin(),u.push(l.result())),L.point=N,y&&o.lineEnd()}function m(c,d){var z=i(c,d);if(p&&h.push([c,d]),P)M=c,w=d,C=z,P=!1,z&&(o.lineStart(),o.point(c,d));else if(z&&y)o.point(c,d);else{var F=[E=Math.max(an,Math.min(b,E)),R=Math.max(an,Math.min(b,R))],H=[c=Math.max(an,Math.min(b,c)),d=Math.max(an,Math.min(b,d))];jt(F,H,n,t,r,e)?(y||(o.lineStart(),o.point(F[0],F[1])),o.point(H[0],H[1]),z||o.lineEnd(),A=!1):z&&(o.lineStart(),o.point(c,d),A=!1)}E=c,R=d,y=z}return L}}const Xn=n=>n;var Z=1/0,pn=Z,en=-Z,hn=en,Yn={point:Vt,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var n=[[Z,pn],[en,hn]];return en=hn=-(pn=Z=1/0),n}};function Vt(n,t){n<Z&&(Z=n),n>en&&(en=n),t<pn&&(pn=t),t>hn&&(hn=t)}function An(n){return function(t){var r=new Cn;for(var e in n)r[e]=n[e];return r.stream=t,r}}function Cn(){}Cn.prototype={constructor:Cn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Nn(n,t,r){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Tt(r,n.stream(Yn)),t(Yn.result()),e!=null&&n.clipExtent(e),n}function et(n,t,r){return Nn(n,function(e){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],f=Math.min(i/(e[1][0]-e[0][0]),a/(e[1][1]-e[0][1])),s=+t[0][0]+(i-f*(e[1][0]+e[0][0]))/2,g=+t[0][1]+(a-f*(e[1][1]+e[0][1]))/2;n.scale(150*f).translate([s,g])},r)}function Jt(n,t,r){return et(n,[[0,0],t],r)}function Xt(n,t,r){return Nn(n,function(e){var i=+t,a=i/(e[1][0]-e[0][0]),f=(i-a*(e[1][0]+e[0][0]))/2,s=-a*e[0][1];n.scale(150*a).translate([f,s])},r)}function Yt(n,t,r){return Nn(n,function(e){var i=+t,a=i/(e[1][1]-e[0][1]),f=-a*e[0][0],s=(i-a*(e[1][1]+e[0][1]))/2;n.scale(150*a).translate([f,s])},r)}var _n=16,_t=U(30*G);function Kn(n,t){return+t?Qt(n,t):Kt(n)}function Kt(n){return An({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function Qt(n,t){function r(e,i,a,f,s,g,v,o,l,u,p,h,M,w){var C=v-e,E=o-i,R=C*C+E*E;if(R>4*t&&M--){var y=f+u,P=s+p,A=g+h,L=vn(y*y+P*P+A*A),N=tn(A/=L),I=x(x(A)-1)<O||x(a-l)<O?(a+l)/2:nn(P,y),T=n(I,N),S=T[0],j=T[1],B=S-e,m=j-i,c=E*B-C*m;(c*c/R>t||x((C*B+E*m)/R-.5)>.3||f*u+s*p+g*h<_t)&&(r(e,i,a,f,s,g,S,j,I,y/=L,P/=L,A,M,w),w.point(S,j),r(S,j,I,y,P,A,v,o,l,u,p,h,M,w))}}return function(e){var i,a,f,s,g,v,o,l,u,p,h,M,w={point:C,lineStart:E,lineEnd:y,polygonStart:function(){e.polygonStart(),w.lineStart=P},polygonEnd:function(){e.polygonEnd(),w.lineStart=E}};function C(N,I){N=n(N,I),e.point(N[0],N[1])}function E(){l=NaN,w.point=R,e.lineStart()}function R(N,I){var T=$([N,I]),S=n(N,I);r(l,u,o,p,h,M,l=S[0],u=S[1],o=N,p=T[0],h=T[1],M=T[2],_n,e),e.point(l,u)}function y(){w.point=C,e.lineEnd()}function P(){E(),w.point=A,w.lineEnd=L}function A(N,I){R(i=N,I),a=l,f=u,s=p,g=h,v=M,w.point=R}function L(){r(l,u,o,p,h,M,a,f,i,s,g,v,_n,e),w.lineEnd=y,y()}return w}}var $t=An({point:function(n,t){this.stream.point(n*G,t*G)}});function Zt(n){return An({point:function(t,r){var e=n(t,r);return this.stream.point(e[0],e[1])}})}function kt(n,t,r,e,i){function a(f,s){return f*=e,s*=i,[t+n*f,r-n*s]}return a.invert=function(f,s){return[(f-t)/n*e,(r-s)/n*i]},a}function Qn(n,t,r,e,i,a){if(!a)return kt(n,t,r,e,i);var f=U(a),s=W(a),g=f*n,v=s*n,o=f/n,l=s/n,u=(s*r-f*t)/n,p=(s*t+f*r)/n;function h(M,w){return M*=e,w*=i,[g*M-v*w+t,r-v*M-g*w]}return h.invert=function(M,w){return[e*(o*M-l*w+u),i*(p-l*M-o*w)]},h}function bt(n){return ne(function(){return n})()}function ne(n){var t,r=150,e=480,i=250,a=0,f=0,s=0,g=0,v=0,o,l=0,u=1,p=1,h=null,M=Jn,w=null,C,E,R,y=Xn,P=.5,A,L,N,I,T;function S(c){return N(c[0]*G,c[1]*G)}function j(c){return c=N.invert(c[0],c[1]),c&&[c[0]*J,c[1]*J]}S.stream=function(c){return I&&T===c?I:I=$t(Zt(o)(M(A(y(T=c)))))},S.preclip=function(c){return arguments.length?(M=c,h=void 0,m()):M},S.postclip=function(c){return arguments.length?(y=c,w=C=E=R=null,m()):y},S.clipAngle=function(c){return arguments.length?(M=+c?Ht(h=c*G):(h=null,Jn),m()):h*J},S.clipExtent=function(c){return arguments.length?(y=c==null?(w=C=E=R=null,Xn):qt(w=+c[0][0],C=+c[0][1],E=+c[1][0],R=+c[1][1]),m()):w==null?null:[[w,C],[E,R]]},S.scale=function(c){return arguments.length?(r=+c,B()):r},S.translate=function(c){return arguments.length?(e=+c[0],i=+c[1],B()):[e,i]},S.center=function(c){return arguments.length?(a=c[0]%360*G,f=c[1]%360*G,B()):[a*J,f*J]},S.rotate=function(c){return arguments.length?(s=c[0]%360*G,g=c[1]%360*G,v=c.length>2?c[2]%360*G:0,B()):[s*J,g*J,v*J]},S.angle=function(c){return arguments.length?(l=c%360*G,B()):l*J},S.reflectX=function(c){return arguments.length?(u=c?-1:1,B()):u<0},S.reflectY=function(c){return arguments.length?(p=c?-1:1,B()):p<0},S.precision=function(c){return arguments.length?(A=Kn(L,P=c*c),m()):vn(P)},S.fitExtent=function(c,d){return et(S,c,d)},S.fitSize=function(c,d){return Jt(S,c,d)},S.fitWidth=function(c,d){return Xt(S,c,d)},S.fitHeight=function(c,d){return Yt(S,c,d)};function B(){var c=Qn(r,0,0,u,p,l).apply(null,t(a,f)),d=Qn(r,e-c[0],i-c[1],u,p,l);return o=kn(s,g,v),L=Pn(t,d),N=Pn(o,L),A=Kn(L,P),m()}function m(){return I=T=null,S}return function(){return t=n.apply(this,arguments),S.invert=t.invert&&j,B()}}function Ln(n,t){return[n,Nt(It((q+t)/2))]}Ln.invert=function(n,t){return[n,2*Zn(At(t))-q]};function rt(){return te(Ln).scale(961/X)}function te(n){var t=bt(n),r=t.center,e=t.scale,i=t.translate,a=t.clipExtent,f=null,s,g,v;t.scale=function(l){return arguments.length?(e(l),o()):e()},t.translate=function(l){return arguments.length?(i(l),o()):i()},t.center=function(l){return arguments.length?(r(l),o()):r()},t.clipExtent=function(l){return arguments.length?(l==null?f=s=g=v=null:(f=+l[0][0],s=+l[0][1],g=+l[1][0],v=+l[1][1]),o()):f==null?null:[[f,s],[g,v]]};function o(){var l=D*e(),u=t(zt(t.rotate()).invert([0,0]));return a(f==null?[[u[0]-l,u[1]-l],[u[0]+l,u[1]+l]]:n===Ln?[[Math.max(u[0]-l,f),s],[Math.min(u[0]+l,g),v]]:[[f,Math.max(u[1]-l,s)],[g,Math.min(u[1]+l,v)]])}return o()}new En;console.log("SVGPathParser:",yt);rt().center([0,0]).translate([0,0]).scale(1);const ee=new at;function fe(){const n=In.useRef(null);return In.useEffect(()=>{const t=n.current;if(t){let r=function(p){u.x=p.clientX/window.innerWidth*2-1,u.y=-(p.clientY/window.innerHeight)*2+1},e=function(p,h){const M=new ft,w=new Array,C=new ct;p.forEach((N,I)=>{const[T,S]=o(N);w.push(new Dn(T,-S,9)),I===0&&C.moveTo(T,-S),C.lineTo(T,-S)});const E=new dn(C,{depth:1,bevelEnabled:!0}),R=(.5+Math.random()*.5)*16777215,y=new zn({color:R,transparent:!0,opacity:.5}),P=new st(E,y);P.position.z=10,P.userData.label=h,M.setFromPoints(w);const A=new pt(Math.random()*.5+.5,Math.random()*.5+.5,Math.random()*.5+.5),L=new ht({color:A});return new vt(M,L),window.mesh=P,P};const i=new Et;i.setSize(window.innerWidth,window.innerHeight),i.domElement.style.position="absolute",i.domElement.style.top="0px",console.log("labelRenderer.domElement:",i.domElement),document.body.appendChild(i.domElement);const a=new dt(t);a.init(),a.updateSize();const{scene:f,camera:s,renderer:g}=a;a.addOrbitControls(s,i.domElement),a.addAction(()=>{}),a.updateAction(),s.position.set(0,-150,100),s.lookAt(new Dn(0,0,0));const v=new it(4210752,10);a.createModel(v);const o=rt().center([116,39]).translate([0,0,0]),l=new ot,u=new Tn;window.addEventListener("pointermove",r),ee.load("100000_full.json",function(p){const h=JSON.parse(p),M=new En;h.features.forEach(m=>{if(m.geometry.type==="MultiPolygon"||m.geometry.type==="Polygon"){const c=new En;M.add(c);const d=m.properties.name,z=m.properties.center,F=document.createElement("div");F.textContent=d,c.name=d,F.style.color="red",F.style.fontSize="10px",F.style.fontWeight="bold";const H=new St(F);if(H.visible=!1,z){const[Y,V]=o(z);H.position.set(Y,-V,10)}c.add(H),m.geometry.coordinates.forEach(Y=>{d==="内蒙古自治区"?c.add(e(Y,H)):Y.forEach(V=>{c.add(e(V,H))})})}}),M.layers.enableAll(),f.add(M);let w=[];const C=new lt;g.setClearColor(0,0),g.autoClear=!1;const E={},R=new zn({color:"black"}),y=new gt;y.set(1),window.layers=y;function P(m){m.isMesh&&y.test(m.layers)===!1?(E[m.uuid]=m.material,m.material=R):m.isMesh}function A(m){E[m.uuid]&&(m.material=E[m.uuid],delete E[m.uuid])}a.addAction(()=>{l.setFromCamera(u,s),l.layers.enable(1);const m=l.intersectObjects([...C.children,...f.children],!0);l.layers.enable(0);const c=l.intersectObjects([...C.children,...f.children],!0);c.push(...c),w.forEach(d=>{try{const z=new dn(d.object.geometry.parameters.shapes,{depth:1,bevelEnabled:!0});d.object.geometry=z,d.object.geometry.verticesNeedUpdate=!0,d.object.geometry.needsUpdate=!0,d.object.geometry.uvsNeedUpdate=!0,d.object.material.opacity=.5,d.object.userData.label&&(d.object.userData.label.visible=!1),d.object.layers.set(0)}catch(z){console.error("err:",z)}}),m.forEach(d=>{try{const z=new dn(d.object.geometry.parameters.shapes,{depth:10,bevelEnabled:!0});d.object.geometry=z,d.object.geometry.verticesNeedUpdate=!0,d.object.geometry.needsUpdate=!0,d.object.geometry.uvsNeedUpdate=!0,d.object.material.opacity=1,d.object.userData.label&&(d.object.userData.label.visible=!0),d.object.layers.enable(1)}catch(z){console.log("err:",z)}}),w=m,i.render(f,s),m.map(d=>d.object),f.traverse(P),L.render(),f.traverse(A),N.render()});const L=new Bn(g),N=new Bn(g),I=new On(f,s);L.addPass(I);const T=new wt(new Tn(window.innerWidth,window.innerHeight),.8,.5,0);L.addPass(T);const S=new mt;L.addPass(S);const j=new Mt(new ut({uniforms:{baseTexture:{value:null},bloomTexture:{value:L.renderTarget2.texture}},vertexShader:document.getElementById("vertexshader").textContent,fragmentShader:document.getElementById("fragmentshader").textContent,defines:{}}),"baseTexture");j.needsSwap=!0;const B=new On(f,s);N.addPass(B),N.addPass(j),N.addPass(S)})}},[]),gn.jsx(gn.Fragment,{children:gn.jsx("canvas",{style:{display:"block",width:"100vw",height:"100vh"},ref:n})})}export{fe as default};
